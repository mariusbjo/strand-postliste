<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8">
  <title>Postliste â€“ Strand kommune</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="web/style.css">
</head>
<body>
  <header class="sticky-header">
    <h1>Postliste â€“ Strand kommune</h1>
    <p class="updated">Oppdatert: {updated}</p>
  </header>

  <!-- Tabs, kommentert ut -->
  <!--
  <nav class="tabs">
    <button class="active" data-tab="postliste">ğŸ“‚ Postliste</button>
    <button data-tab="stats">ğŸ“ˆ Statistikk</button>
  </nav>
  -->

  <!-- Filterseksjon -->
  <section class="controls">
    <div class="field">
      <label for="searchInput">SÃ¸k i tittel/dokumentID</label>
      <input type="text" id="searchInput" placeholder="SÃ¸k..." oninput="applySearch()" />
    </div>
    <!--
    <div class="field">
      <label for="searchAM">Avsender/Mottaker</label>
      <input type="text" id="searchAM" placeholder="SÃ¸k..." oninput="applySearch()" />
    </div>
    -->
    <div class="field">
      <label for="dateFrom">Fra dato</label>
      <input type="date" id="dateFrom" onchange="applyDateFilter()" />
    </div>
    <div class="field">
      <label for="dateTo">Til dato</label>
      <input type="date" id="dateTo" onchange="applyDateFilter()" />
    </div>
    <!--
    <div class="actions">
      <div class="quick">
        <button onclick="setQuickRange('week')">Siste uke</button>
        <button onclick="setQuickRange('month')">Siste mÃ¥ned</button>
      </div>
    </div>
    -->
    <div class="field">
      <label for="filterType">Dokumenttype</label>
      <select id="filterType" onchange="applyFilter()">
        <option value="">Alle</option>
        <option value="InngÃ¥ende">InngÃ¥ende</option>
        <option value="UtgÃ¥ende">UtgÃ¥ende</option>
        <option value="Sakskart">Sakskart</option>
        <option value="MÃ¸tebok">MÃ¸tebok</option>
        <option value="MÃ¸teprotokoll">MÃ¸teprotokoll</option>
        <option value="Saksfremlegg">Saksfremlegg</option>
        <option value="Internt">Internt</option>
      </select>
    </div>
    <div class="field">
      <label for="statusFilter">Status</label>
      <select id="statusFilter" onchange="applyStatusFilter()">
        <option value="">Alle</option>
        <option value="Publisert">Publisert</option>
        <option value="MÃ¥ bes om innsyn">MÃ¥ bes om innsyn</option>
      </select>
    </div>
    <div class="field">
      <label for="sortSelect">Sortering</label>
      <select id="sortSelect" onchange="applySort()">
        <option value="dato-desc">Dato nyeste fÃ¸rst</option>
        <option value="dato-asc">Dato eldste fÃ¸rst</option>
        <option value="type-asc">Type Aâ€“Ã…</option>
        <option value="type-desc">Type Ã…â€“A</option>
        <option value="status-publisert">Publisert fÃ¸rst</option>
        <option value="status-innsyn">Innsyn fÃ¸rst</option>
      </select>
    </div>
    <div class="field">
      <label for="perPage">Per side</label>
      <select id="perPage" onchange="changePerPage()">
        <option value="25">25</option>
        <option value="50">50</option>
        <option value="100">100</option>
        <option value="3000">Alle</option>
      </select>
    </div>
  </section>

  <!-- Sammendragstekst -->
  <p class="summary" id="summary"></p>

  <!-- Tab-innhold: Postliste -->
  <section id="tab-postliste" class="tab-content active">
    <nav id="pagination-top" class="pagination"></nav>
    <main id="container" class="container"></main>
    <nav id="pagination-bottom" class="pagination"></nav>
  </section>

  <!-- Tab-innhold: Statistikk, kommentert ut -->
  <!--
  <section id="tab-stats" class="tab-content">
    <h2>ğŸ“ˆ Statistikk</h2>
    <div class="stats-container">
      <div><h3>Publisert per uke</h3><canvas id="chartWeekly"></canvas></div>
      <div><h3>Fordeling pÃ¥ dokumenttyper</h3><canvas id="chartTypes"></canvas></div>
    </div>
  </section>
  -->

  <!-- Dark mode toggle -->
  <button class="toggle-dark" id="darkToggle">ğŸŒ™ Dark mode</button>

  <!-- Data og konfig -->
  <script>
    const data = {data_json};
    let perPage = {per_page};

    // Tab-switching
    document.addEventListener("DOMContentLoaded", () => {
      const tabs = document.querySelectorAll(".tabs button");
      const contents = document.querySelectorAll(".tab-content");

      tabs.forEach(tab => {
        tab.addEventListener("click", () => {
          tabs.forEach(t => t.classList.remove("active"));
          tab.classList.add("active");

          contents.forEach(c => c.classList.remove("active"));
          document.getElementById("tab-" + tab.dataset.tab).classList.add("active");
        });
      });

      // Dark mode toggle
      const toggle = document.getElementById("darkToggle");
      toggle.addEventListener("click", () => {
        document.body.classList.toggle("dark");
        toggle.textContent = document.body.classList.contains("dark")
          ? "â˜€ï¸ Light mode"
          : "ğŸŒ™ Dark mode";
      });
    });
  </script>

  <script type="module" src="web/script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>
